@(requests: List[ReviewRequest], uris: Map[Int, String], max: Int, user: User)
@main("Requests") {
@if(requests.size >= max) {
<h3 class="text-center sbw-red">Limiting display to @max most recent requests</h3>
}
<div class="panel panel-default">
	<div class="panel-body">
		<form id="requests-filter" class="form-inline text-center">
			<label class="control-label" for="status">Status</label>
			<select id="status" name="status" class="form-control">
				<option value="open">Open</option>
				<option class="text-muted" disabled="disabled">----------------</option>
				<option value="all-closed">All Closed</option>
				<option value="abusive">Abusive</option>
				<option value="administrative">Administrative</option>
				<option value="reviewed-bad">Reviewed Bad</option>
				<option value="reviewed-clean">Reviewed Clean</option>
				<option value="no-partners-reporting">No Partners Reporting</option>
			</select>	
			
			<label class="control-label" for="requested">Requested</label>
			<input type="text" class="form-control date-picker text-center" id="requested" name="requested">
			
			<button type="submit" id="btn-filter" class="btn btn-default form-btn">Filter</button>	
		</form>
	</div>
	<table id="requests-table" class="table table-striped table-hover table-condensed table-sorted">
    	<thead>
    		<tr>
    			<th title="Click URI to view request">URI</th>
    			<th>Email</th>
    			<th>IP</th>
    			<th>Requested At</th>
    			<th>Closed At</th>
    			<th>Closed Reason</th>
    			<th>Review</th>
    		</tr>
    	</thead>    	
    	<tbody>
    	@requests.map { request =>
    		<tr class="text-center">
    		@defining(uris(request.uriId)) { uri =>
    			<td class="text-left nowrap" title="View details for @uri">
    				<a href="/requests/@request.id">@(if (uri.length>40) uri.slice(0, 40)+"..." else uri)</a>
   				</td>
   			}
    			<td class="text-right">@request.email</td>
    			@if(request.ip.nonEmpty){<td class="ipv4 text-right" title="@request.ip.get">@request.ip.get</td>}else{<td></td>}
    			<td class="unixtime text-right">@request.requestedAt</td>
    			@if(request.closedAt.nonEmpty){<td class="unixtime text-right">@request.closedAt.get</td>}else{<td></td>}
    			@if(request.closedReason.nonEmpty){<td class="enum">@request.closedReason.get</td>}else{<td></td>}
    			@if(request.reviewId.nonEmpty){<td><a href="/reviews/@request.reviewId.get">@request.reviewId.get</a></td>}else{<td></td>}
    		</tr>
    	}
    	</tbody>	
	</table>
	@partials.noresults()
</div>	
}