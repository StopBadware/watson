@(user: User)
@import models.enums.Role
@main("Request Responses") {
@defining(user.hasRole(Role.VERIFIER) || user.hasRole(Role.ADMIN)) { canModify =>
	<div id="view-request-responses" class="well well-lg">
		@RequestResponse.allResponses.groupBy(_.question).map { case (question, summaries) =>
			<label>@question</label>
			@if(canModify) {
			@defining(if (summaries.head.questionEnabled) "Enabled" else "Disabled") { txt =>
				@defining(if (summaries.head.questionEnabled) "btn-success" else "btn-danger") { btnType =>
				<button id="question-@summaries.head.questionId" type="button" class="btn @btnType btn-xs toggle-response">@txt</button>
				}
			}
			}
			<table id="request-responses" class="table table-condensed auto-width">
				<thead>
					<tr>
						<th>answer</th>
						<th>count</th>
						@if(canModify) {
							<th></th>
						}
					</tr>
				</thead>
				@summaries.map { summary =>
				<tr>
					<td>@summary.answer</td>
					<td class="text-right">@summary.count</td>
					@if(canModify) {
					@defining(if (summary.answerEnabled) "Enabled" else "Disabled") { txt =>
						@defining(if (summary.answerEnabled) "btn-success" else "btn-danger") { btnType =>
						<td><button id="answer-@summary.answerId" type="button" class="btn @btnType btn-xs toggle-response">@txt</button></td>
						}
					}
					}
				</tr>
				}
			</table>
		}
	</div>
	@if(canModify) {
	<div class="well well-lg watson-green-bg text-center">
		<a href="/requests/responses/new"><button type="button" class="btn btn-default">Add New Question</button></a>
	</div>
	}
}
}
